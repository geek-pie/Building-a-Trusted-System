JWT（JSON Web Token）诞生的主要原因之一是为了解决传统的基于会话的身份验证机制（如使用 Cookie 和 Session）所遇到的一些限制和挑战。

1.  **分布式环境下的扩展性**：在传统的基于 Session 的身份验证机制中，会话状态通常存储在服务器端的内存或者数据库中。这种方式在分布式系统中会引入挑战，需要额外的成本和复杂性来保持会话状态同步。而 JWT 是无状态的，它包含了身份验证信息以及相关的元数据，这使得它对于分布式和高可扩展性的应用更加友好。

2. **跨域和移动端支持**：传统的 Cookie 和 Session 机制存在一些跨域限制，可能会导致在跨域场景下出现问题。而 JWT 可以更容易地跨域和在移动端应用中使用，因为它可以通过 HTTP 头进行传递，独立于请求的源。

3. **前后端分离与无状态性**：随着前后端分离架构的流行，无状态性变得更为重要，因为后端不再保存会话状态。JWT 可以通过在客户端存储 Token 来实现身份验证，从而完全避免后端保存会话状态。

4. **安全性与扩展性**：JWT 采用数字签名或加密来验证数据的完整性和真实性。与之相比，传统的 Cookie 机制会面临跨站脚本（XSS）和跨站请求伪造（CSRF）等安全威胁。此外，JWT 也更容易与现代的 API 鉴权机制和单点登录集成。

总的来说，JWT 的产生主要是为了提供一种更灵活、更安全、更适应现代分布式系统和前后端分离架构的身份验证机制，相比之下传统的 Cookie 和 Session 机制则更倾向于基于服务器会话状态的认证和授权方式。


JWT（JSON Web Token）是一种开放标准（RFC 7519），用于在各方之间安全地传输信息。它以紧凑且自包含的方式传输信息，通常被用于在用户和服务器之间传递认证信息。

JWT由三部分组成，用点号分隔：头部（header）、载荷（payload）、签名（signature）。这三部分一起构成了一个被加密后的字符串，可以被安全地在用户和服务器之间传输。

- **头部（Header）** 包含了令牌的类型和签名所用的算法类型。

- **载荷（Payload）** 包含了声明（claims）。声明是关于实体（通常指的是用户）和其他数据的一种声明。声明分为注册声明、公共声明和私有声明。注册声明包括了一些固定的信息，例如令牌的颁发者（iss）、令牌的主题（sub）、令牌的接收者（aud）、过期时间（exp）等。公共声明包括了一些公共的信息，可以自定义添加。私有声明包括了一些用户自定义的信息，用来存放一些用户的非敏感信息。

- **签名（Signature）** 是使用头部和载荷的信息以及一个密钥（secret）来创建的，用于验证消息在传输过程中未被篡改。

为了确保 JWT 令牌没有被伪造，可以采取以下措施：

1. **使用安全的算法进行签名**：选择安全的加密算法，比如 HMACSHA256 或者 RSA，确保令牌的签名是安全的。

2. **避免将敏感信息存储在 JWT 中**：尽量避免在 JWT 中存储敏感信息。尤其是避免将密码等敏感信息放入 JWT。

3. **使用 HTTPS 进行传输**：在网络传输中使用 HTTPS，确保令牌在传输过程中不被窃取或篡改。

4. **令牌的有效期限**：设置令牌的有效期限，确保令牌在过期后不能被使用。

5. **验证和解析令牌**：在服务端对接收到的令牌进行验证和解析，确保令牌是有效且未被篡改的。

6. **使用适当的库和工具**：使用被广泛测试且被维护的库和工具来处理 JWT，不要自己动手写加密逻辑。

通过以上措施，可以有效地保证 JWT 令牌在传输和使用过程中不被伪造。

JSON Web Tokens (JWT) 是一种用于安全传输信息的开放标准（RFC 7519），它通过数字签名验证和/或加密确保信息的安全传输。JWT 由三部分组成，分别是头部（Header）、载荷（Payload）、签名（Signature）。这三部分使用点（.）连接成一个完整的字符串，最终的 JWT 通常看起来是这样的：xxxxx.yyyyy.zzzzz。

### 优点

1. **轻量级和自包含**：JWT 被设计成轻量级的，因此非常适合在客户端、服务端、以及跨不同的域进行传输。同时，它包含了足够的信息以供您进行身份验证和授权检查，使得无需每次都查询数据库或者其他存储设施。

2. **跨平台和语言无关**：JWT 是基于标准的 JSON 格式设计的，这使它非常容易在不同的系统之间传输，不受编程语言限制。

3. **安全可靠**：通过数字签名验证或加密，JWT 在传输过程中保证了数据不被篡改和伪造的安全性。

4. **扩展性强**：可以加入自定义的声明，来满足不同应用的需求。

### 缺点

1. **无法撤销**：一旦 JWT 颁发，内部信息的有效性在其过期时间内都是有效的。即使在此期间，需要立即撤销对应用户的访问权限，也需要等待 JWT 过期或者额外的处理程序来添加撤销机制。

2. **信息量有限**：尽管 JWT 能够保存一些基本信息，但是由于其存储在客户端，所以不能保存敏感信息，因为它基本上是可以被客户端解析的。

3. **可能导致过多数据传输**：因为 JWT 的 Payload 部分是 base64 编码的，可能会导致在网络传输上一些额外的开销。

4. **客户端存储**：与传统的会话认证相比，JWT 是存储在客户端的，这意味着存在被篡改的风险。应当谨慎对待其中所包含的信息。

5. **难以处理撤销**：由于 JWT 中的信息被签名或加密，撤销一个特定的 JWT 可能比较困难。一种做法是增加额外的存储和验证操作。

尽管存在这些缺点，但仍然可以看到 JWT 的许多优点，尤其是在跨系统身份验证和信息传输方面的灵活性和便利性。在使用时，需要权衡其优缺点，并根据特定的应用场景和需求来做出合适的选择。

token设计的初衷就是不需要存储。


JSON Web Tokens (JWT)是一种安全的、紧凑的方式来传输信息的格式。它们通常用于在用户和服务器之间传递身份验证信息。以下是一些合理的使用 JWT 的方式：

### 身份验证和授权
JWT 可以用于在客户端和服务器之间安全地传递用户的身份验证和授权信息。当用户成功登录后，服务器可以生成一个 JWT，并将其返回给客户端。客户端随后可以在每次请求中发送该令牌，以便服务器能够验证用户身份并对其进行授权操作。

### 信息交换
JWT 也可以用于在系统之间安全地传递信息。例如，当一个系统需要调用另一个系统的 API 时，可以使用 JWT 作为一种认证方式，并且在请求中携带 JWT 来传递信息。

### 无状态应用
由于 JWT 包含了所需的所有认证信息，因此在服务器端不需要存储会话信息。这使得 JWT 特别适用于构建无状态的应用，因为服务器无需在多个请求之间保留任何信息。

关于存储方式，一般情况下，JWT 本身不需要在服务器端进行存储。然而，服务器需要验证JWT的签名以确保它是有效和未被篡改的。如果需要进行存储，只需存储密钥，以便服务器可以在需要时对 JWT 进行验证。

需要注意的是，JWT 本身并不适合存储敏感信息，因为 JWT 是可解码的，尽管它们是经过签名的。因此，敏感信息应该在加密的情况下被传输并存储，而不是直接放在 JWT 中。

总之，JWT 是一个方便且安全的方式用于在不同系统间传递信息和实现身份验证授权，但仍需小心处理其中包含的信息及其存储方式。

参考链接：
【[4.12]--JWT（JSONWebToken）介绍】https://www.bilibili.com/video/BV1AL411e7ua?vd_source=cdc7546fb2f6a5364078106fba5179a8
